# 1. 常见问题

## 1.1 后端

| 序号 | 问题记录                                                     | 解决方式                                                     | 提出人 | 解答人 |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------ | ------ |
| 1    | url传参获取不到                                              | Controller加@PathVariable注解                                | 王东   | 王东   |
| 2    | 抛出异常Could not open  JDBC Connection for transaction      | 连续时间操作同一数据，数据被锁，换一条新数据                 | 张建设 | 杨波   |
| 3    | idea连接不到数据库                                           | 到阿里云服务器修改ip                                         | 熊铂文 | 赵立远 |
| 4    | 传递数值到前段为空。要求传值“data”但是传过去为“rows”         | AjaxResult.success有几个重写的方法其中，如：AjaxResult.success(msg,data);将你要传递的数据，放到第二位置就行 | 杨波   | 赵立远 |
| 5    | "status":  403 ，     "error: "Forbidden"，     "'messagel": "Forbidden" ， | 匿名访问没关                                                 | 杨波   | 杨波   |
| 6    | 时间类型接收失败                                             | 在字段上添加@JsonFormat注解                                  | 张建设 | 李春旭 |
| 7    | 接收不到前端传递给后端的json字符串中的数据                   | Controller加@RequestBody注解                                 | 熊铂文 | 赵立远 |
| 8    | 找不到对应的实体类                                           | 导错了包，将系统包改成自己写的                               | 熊铂文 | 张建设 |
| 9    | 退出登录失败                                                 | 在有个地方乱加注解@EnableWebMvc                              | 孟令程 | 王东   |
| 10   | 接收和传输数据类型不同                                       | form和json区别  一个带"" 一个不带""                          | 孟令程 | 王东   |
| 11   | 手机端页面显示积分过多，多次注册获得的积分，<br>数据库所有用户积分都被一个人获取的问题 | 获取积分的代码增加获取当前用户id,可以解决                    | 刘立港 | 赵立远 |
| 12   | 个人积分页面，总积分为10000下面积分明细那<br>有多行注册赠送10000 | 检查代码，是否注册时，调用了多次赠送10000积分                | 宋志永 | 王东   |
| 13   | 查询订单空箱下单时间和重箱提取时间问题，查询不出来数据       | 首先在增加一个时间代码的封装，其次增加时间的注解，更改impl，更改controller,更改service，具体如何操作请直接找我或者李浩同学 | 刘立港 | 李浩   |
| 14   | msg: "Mapper  method 'com.ruoyi.project.storage.mapper.UserMapper.<br>checkPhoneUnique  attempted to return null<br/> from a method with a primitive return type  (int)." | checkPhoneUnique  返回为int，但什么都没查到，int作为基本数据类型不能为null | 宋志永 | 王东   |
| 15   | CRT连接不上服务器                                            | 修改ip并重启服务器                                           | 熊铂文 | 熊铂文 |
| 16   | 不能使用@autowire                                            | 加@service                                                   | 熊铂文 | 王东   |
| 17   | 测试后台端订单删除操作，结果后台页面显示收取空箱按钮，点击后，该订单自动删除，手机端页面显示删除按钮，点击删除，才删除，正常操作是后台端订单页面点击收取空箱，后台标志位设为2，手机端页面显示删除按钮，手机端点击按钮，删除了订单，手机端标志位设置为2，后台页面订单未删除，后台页面订单点击批量删除按钮，后台页面的订单才被删除 | 解决方法:后台端查询订单列表的条件设置为del_flag  = '0',原来设置为了backend_del_flag =0,导致后台端收取空箱后，直接删除了订单，也导致了后台端查询订单出错，缺少订单 | 刘立港 | 杨波   |
| 18   | 页面获取不到后端订单列表，通过swagger测试能拿到数据，前后端接口请求方式都没有错 | 该接口有一些String请求参数，当没有输入时，传回后端的sql没有对这些参数判空字符 | 孔朝功 | 王东   |
| 19   | 手机端点击广告轮播前端不能拿到当前广告（图片）的id和积分     | 因为前端对于图片路径row.path[0].src.split("http://localhost:8090/prod-api");做了一个分割，由于改了index.js里的端口号，导致这匹配不上，然后就导致imgSrc[1]是undefined。修改此处端口号和配置文件一样，问题解决 | 孔朝功 | 王东   |
| 20   | 获取默认地址出错，获取的默认地址有多个，导致预约出错以及后台测试页面报错，空箱订单名称没有默认值问题 | 获取默认地址的mapper原来的返回值写成了返回数组，改成返回地址，xml里面限制默认地址为1，limit  1 | 刘立港 | 赵立远 |
| 21   | 后台端订单收取空箱后，箱子应该返回使用人为空和未使用，即箱子信息修改，同时也要更新订单状态，逻辑混淆，不懂如何同时操作，返回的箱子修改信息也不是很清楚 | 修改箱子信息表在更新订单状态之后，即先收取空箱，操作失败抛异常，再修改箱子信息表，更新失败，同样抛异常，最后在方法外面增加@Transactional(rollbackFor  = Exception.class) | 刘立港 | 孔朝功 |
| 22   | 前后端联调，前端不能找到接口报404                            | 有可能是url地址不对，还有前后端请求方式不同，看接口文档，检查一下 | 孔朝功 | 孔朝功 |
| 23   | VO实体类名黄色下波浪线，提示没有写toSting                    | 在@Data注解的基础上，加上@EqualsAndHashCode(callSuper  = true)注解 | 孔朝功 | 王东   |
| 24   | 手机端注册填写完信息后点注册，报401，无法访问系统资源        | 排查url地址和请求方式是否和接口文档一致，可以先测试一下登录是否好使，如果登录不好使，排查index.js修改target为http://localhost:51110；然后排查application.yml中的port:是不是51110，还有context-path:  /prod-api/。如果都正确，检查是否能访问redis,还有注意当前连的数据库，找到当前连的数据库，用表里的手机端用户测试是否能正常登录。扯远了，其实如果注册不能访问还要排查一下注册匿名访问url是否正确 | 孔朝功 | 王东   |
| 25   | 订单操作除了预约是最后插入订单历史表的，其余操作需要先插入订单历史表，如何提前插入订单历史表的呢? | 只需要在总方法内第一行加一句插入订单历史表操作即可，后续所有其他状态都不需要再添加插入订单历史表操作 | 刘立港 | 孔朝功 |
| 26   | connect  localhost:6379                                      | 服务器未启动redis                                            | 熊铂文 | 郝健   |
| 27   | 单独一项功能在swagger-ui中运行时出现  Faild to fetch         | 使用chrome浏览器或更换其他浏览器重新访问swagger-ui           | 范崇岩 | 范崇岩 |
| 28   | 手机端状态操作6，获取不到必须的参数                          | OrderVO对象被重新赋值了，在开头把需要获取的参数，重新定义，在手机端状态操作6的方法内添加获取的参数即可 | 刘立港 | 杨波   |
| 29   | 前后端联调，前端发送请求出现500报错                          | 检查nginx配置文件中前端请求的地址的相关配置以及向服务器上传的前端项目中index.js配置的请求后端地址是否正确 | 范崇岩 | 范崇岩 |
| 30   | 后台端测试，查询箱子信息列表报sql错误                        | 箱子信息xml里面查询箱子信息sql代码没有格式化，导致数据库查询出错，格式化后，代码对应成功 | 刘立港 | 赵立远 |
| 31   | 后台端测试，广告列表不显示图片问题                           | 本地测试上传图片的路径出错，在yml里面增加profile:  /home/ruoyi/uploadPath即可 | 刘立港 | 赵立远 |
| 32   | 后台端测试，获取当前用户积分出错                             | 请求方式写错，改成get请求方式即可                            | 刘立港 | 赵立远 |
| 33   | 前端退出登录失败                                             | 添加url =  url.replaceAll("51120",  "51110").replaceAll("51130",  "51110").replaceAll("51140",  "51110").replaceAll("51150", "51110") +  "/logout"; | 熊铂文 | 王东   |
| 34   | 尝试使用递归调用解决箱子补偿问题，结果产生死锁               | 定义方法，返回修改使用人后的箱子信息，循环调用，没有箱子就返回null，打破循环 | 李浩   | 王东   |
| 35   | 获取当前手机端用户积分出错，用户积分不减少，一直是注册的积分 | 对应的controller里面写的返回参数出错，改成对应的参数即可     | 刘立港 | 赵立远 |
| 36   | Mybatis查询字段为null                                        | Mybatis没写映射                                              | 蒙园青 | 蒙园青 |
| 37   | 后台端测试，订单列表空箱上门时间查询失败                     | 前端date类型改为String类型                                   | 胡明浩 | 胡明浩 |
| 38   | 阿里云部署服务器：打jar包问题，以及上传test文件中的相关配置  | 要注意上传的分支文件中使用的哪个库，并且需要自己的阿里云内网ip或localhost，但在此分支上运行的时候，需要换成公网ip，不然会循环报错。 | 张演超 | 郝建   |
| 39   | 报错某字段doesn't have a  defalue value                      | xml中的sql语句缺少相关字段                                   | 张演超 | 张演超 |
| 40   | 前端注册完客户，role返回了backend                            | 检查了注册客户时的部门号dept_id字段（用户新增的部门号为113），更正为114 | 张演超 | 李浩   |
| 41   | `Cause:  java.lang.IllegalArgumentException: invalid comparison: java.util.Date and  java.lang.String"`在Mapper.xml文件中将一个Date类型的参数与空字符串`''` 进行了对比，引发了异常。 | 去掉空字符串判断, 只保留非空判断。                           | 闫家祺 | 闫家祺 |
| 42   | description注解过期问题                                      | 将其内容与前面tags中内容进行合并，但是不推荐继续使用该注解。OOP规约中强调，不能使用过时类或的方法，提供方有义务提供新的接口，而作为调用来方来说，也有义务去考证过时方法的新实现是什么。 | 闫家祺 | 闫家祺 |
| 43   | Service接口循环注入                                          | [使用当前类的代理类](https://www.jianshu.com/p/d935341694d2) | 闫家祺 | 闫家祺 |
| 44   | Parameter 'offset'  not found. Available parameters are [0, 1, param1, param2] | 在方法中传递了两个参数，#{}取值时便不能明确表示是哪一个，Mybatis提供了一个注解：`@Param` | 闫家祺 | 闫家祺 |
| 45   | idea创建包后，包的折叠问题/包自动以“a.b”的形式显示的问题     | 菜单设置【Compact Middle  Package】                          | 闫家祺 | 闫家祺 |
| 46   | 打完断点调试完毕，不能正常运行                               | 快捷键【ctrl+shift+F8】查看当前所有断点，取消限制程序不能正常运行的断点。 | 闫家祺 | 闫家祺 |
| 47   | 提示：程序包不存在/找不到符号     原因：删除了一个class，但是该class在其他类里面的引用并未删掉 | maven clean 以及maven  install                               | 闫家祺 | 王东   |
| 48   | 提示【mvn不是可用的命令】                                    | mvn环境变量设置问题，maven依赖于java环境，故环境变量应在java下。 | 闫家祺 | 王东   |
| 49   | 联调时获取默认地址数据类型错误                               | 将List<Address>改为Address                                   | 闫家祺 | 黄大钊 |
| 50   | 联调测试，手机端无法显示获取的默认地址                       | 返回数据不可以是list，应该是Address,地址是一个而不是一堆     | 熊铂文 | 邱嘉祺 |
| 51   | 新增箱子规格后，数据新增成功，但是前端箱子分页显示不出来除了规格和积分单价其他的数据 | debug调试后发现新增的数据正常拿到，则考虑取到vo显示对象里面的字段即可 | 张演超 | 张演超 |
| 52   | 后台端首页修改密码前端获取500,null                           | 在后台端首页Controller少加了@PathVariable注解                | 邱嘉祺 | 王东   |
| 53   | 箱子规格新增逻辑理解不明白                                   | 画流程图，然后备份原来的代码，按流程图重新编辑代码，最后对照 | 郝健   | 王东   |
| 54   | 预约空箱的时候,日期一直不识别,格式错误                       | 需要加上@JsonFormat注释                                      | 张演超 | 王东   |
| 55   | 订单管理中的订单列表(分页)，客户名称无法进行右模糊查询       | concat(#{nickName},'%')写错为concat(#(nickName),'%')         | 商吉庆 | 王东   |
| 56   | 在需要查询的功能中，本应该有数据的字段的查询结果为空         | <resultMap>中的column拼写错误，导致字段与属性之间无法进行映射 | 商吉庆 | 商吉庆 |
| 57   | 部署前端代码到服务器后（部署正确无误），访问地址依旧不能正常跳转 | 原因：未清空浏览器缓存，情况即可                             | 杨波   | 赵立远 |
| 58   | idea报错：找不到或无法加载主类                               | maven clean                                                  | 熊铂文 | 赵立远 |
| 59   | 前后联调，前端报错Failed to  parse Date value                | 添加@JsonFormat(shape =  JsonFormat.Shape.STRING, pattern = "yyyy-MM-dd", timezone =  "GMT+8") | 熊铂文 | 赵立远 |
| 60   | 前后联调，箱子信息拿不到使用人                               | 在xml的映射中添加nick_name  -> usedByName                    | 熊铂文 | 郝健   |
| 61   | 前后联调测试，删除箱子规格没传箱子规格id                     | domain中箱子规格实例化对象中没有序列id字段。映射中也需要加id | 李春旭 | 胡明浩 |
| 62   | 注册不了，一直报401                                          | 匿名访问没开                                                 | 胡明浩 | 王东   |
| 63   | 订单操作需求设计不太理解                                     | 用processon画流程图                                          | 胡明浩 | 王东   |
| 64   | 广告积分获取提示反序列化失败，获取不到前端传的参数           | 传递类型为pointRecord，应该把原本controller里的Long  id ，Long points修改为 PointRecord | 袁畅宏 | 李浩   |
| 65   | 前后联调，订单操作后没有对箱子信息进行修改                   | 没有对userId进行传值，添加@Param注解                         | 熊铂文 | 赵立远 |
| 66   | 广告积分获取失败                                             | 使用@PutMapping注解                                          | 熊铂文 | 赵立远 |
| 67   | SecureCRT登录连接不上服务器（修改跳动万网查询到的ip后依然连不上） | 在阿里云的设置安全组序例中，将网站查询的ip和万网查询到的ip全部添加，原因是有可能电脑连接WiFi，ip不一定是哪个网站查询到的，所以将两个ip全加上 | 张演超 | 王东   |
| 68   | git上传错误（出现蓝色文号）                                  | 没有对所有文件进行git add                                    | 熊铂文 | 王东   |
| 69   | 下载服务器文件                                               | sz 文件名                                                    | 熊铂文 | 郝健   |

## 1.2 前端

| 序号 | 问题记录                                                     | 解决方式                                                     | 提出人       | 解答人     |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------ | ---------- |
| 1    | 如果在第二页点击查询重置，结果还是会在第二页                 | 调用handleCurrent(1) 传值1                                   | 王东         | 贺缙殷     |
| 2    | 设置过宽度的<p>或<h1>-<h6>内，存在只有数字或只有汉字时溢出且不自动换行的问题 | 给父盒子增加一个word-break:break-all;实现强制换行            | 郑福林       | 郑荣       |
| 3    | 手机端空箱预约选择地址，订单预约提取选择地址和个人中心的地址管理功能冲突，判断地址管理来源问题 | 分别在个人中心页，预约提取页，空箱预约页的选择地址处，使用localStorage.setItem("from",n),的方式分别为"from"存不同的值，再在进入地址管理页后判断"from"的值，对应的值执行相应地功能 | 易维，郑福林 | 王东，郑荣 |
| 4    | 取localStorage值时，返回值为[object,object]                  | 在localStorage存储时value值为一个对象，将其改为JSON.stringify(object),或存储不为对象的值 | 任珈辉       | 任珈辉     |
| 5    | 手机端懒加载实现刷新列表(同步请求数据)                       | 改用JQ的&ajax请求  使用 async: false 代表是同步 在数据请求里不能直接用 data 里定义的变量 也就是  (this.list=res.data.ros)给全局变量赋值是不好使的 需要在 发送送请求的函数里进行定义变量 a  (a=res.data.ros_)在函数里已return的形式进行返回 | 刘林鑫       | 刘林鑫     |
| 6    | 判断地址管理由哪里进的（第二个方法）                         | 跳转路由的时候传个不同的参数，通过参数判断是哪个页面传来     | 贺缙殷       | 贺缙殷     |